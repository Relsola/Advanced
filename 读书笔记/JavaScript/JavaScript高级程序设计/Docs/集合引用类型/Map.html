<script>
	{
		const m = new Map();

		const m1 = new Map([
			["key1", "val1"],
			["key2", "val2"],
			["key3", "val3"]
		]);
		console.log(m1);

		const m2 = new Map({
			[Symbol.iterator]: function* () {
				yield ["key1", "val1"];
				yield ["key2", "val2"];
				yield ["key3", "val3"];
			}
		});
		console.log(m2);

		console.log(new Map([[]])); // Map(1) {undefined => undefined}
	}

	{
		// set 添加键值对
		// has get 查询
		// size 键值对数量
		// delete clear 删除键值对

		const m = new Map();

		const objKey = {},
			objVal = {},
			arrKey = [],
			arrVal = [];

		m.set(objKey, objVal).set(arrKey, arrVal);
		console.log(m.size); // 2
		objKey.foo = "foo";
		objVal.bar = "bar";
		arrKey.push("foo");
		arrVal.push("bar");

		console.log(m.get(objKey)); // {bar: 'bar'}
		console.log(m.has(arrKey)); // true

		m.delete(arrKey);
		m.clear();

		// 特殊冲突
		const a = 0 / "", // NaN
			b = 0 / "", // NaN
			pz = +0,
			nz = -0;

		console.log(a === b); // false
		console.log(pz === nz); // true

		m.set(a, "foo");
		m.set(pz, "bar");

		console.log(m.get(b)); // foo
		console.log(m.get(nz)); // bar
	}

	{
		const m = new Map([
			["key1", "val1"],
			["key2", "val2"],
			["key3", "val3"]
		]);
        // 返回键值对迭代器
		console.log(m.entries === m[Symbol.iterator]); // true

		for (const pair of m.entries()) {
			console.log(pair);
		}
		// ['key1', 'val1']
		// ['key2', 'val2']
		// ['key3', 'val3']

		console.log([...m]);
		// [['key1', 'val1'], ['key2', 'val2'], ['key3', 'val3']]

		// m.forEach(callback, opt_thisArg);
        // m.keys() 
        // m.values()
	}
</script>
