# Vue 组件的 data 为什么必须是一个函数

**JavaScript中的对象是引用类型的数据，当多个实例引用同一个对象时，只要一个实例对这个对象进行操作，其他实例中的数据也会发生变化。**

* 当 data 的值是一个对象时，它会在这个组件的所有实例之间共享。

* 而在Vue中，我们更多的是希望复用组件，这时就会产生问题。因为每个组件的实例都引用了相同的数据对象，更改其中一个实例的数据，就会改变其它实例中的数据。那就需要每个组件都有自己的数据，这样组件之间才不会相互干扰

* 我们希望每个组件实例都管理其自己的数据。为了做到这一点，每个实例必须生成一个独立的数据对象。在 JavaScript 中，在一个函数中返回这个对象就可以了，这样就可以避免组件复用时的数据污染：

```js
data: function () {
  return {
    listTitle: '',
    todo: []
  }
}
```

* 为什么组件中的 data 必须是一个函数，然后 return 一个对象，而 new Vue 实例里，data 可以直接是一个对象？

* 因为组件是用来复用的，且 JS 里对象是引用关系，如果组件中 data 是一个对象，那么这样作用域没有隔离，子组件中的 data 属性值会相互影响，如果组件中 data 选项是一个函数，那么每个实例可以维护一份被返回对象的独立的拷贝，组件实例之间的 data 属性值不会互相影响；而 new Vue 的实例，是不会被复用的，因此不存在引用对象的问题。


